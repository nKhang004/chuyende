<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Há»‡ Thá»‘ng Äiá»ƒm Danh Sinh ViÃªn</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
</head>
<body>
    <nav class="navbar">
        <div class="container">
            <h1 class="logo">ğŸ“¸ Há»‡ Thá»‘ng Äiá»ƒm Danh</h1>
            <ul class="nav-menu">
                <li><a href="/" class="active">Trang chá»§</a></li>
                <li><a href="/register">ÄÄƒng kÃ½</a></li>
                <li><a href="/attendance">Äiá»ƒm danh</a></li>
                <li><a href="/history">Lá»‹ch sá»­</a></li>
                <li><a href="/students/manage">Quáº£n lÃ½ SV</a></li>
            </ul>
        </div>
    </nav>

    <div class="container">
        <div class="hero">
            <h2>ChÃ o má»«ng Ä‘áº¿n vá»›i Há»‡ Thá»‘ng Äiá»ƒm Danh Sinh ViÃªn</h2>
            <p>Sá»­ dá»¥ng cÃ´ng nghá»‡ nháº­n diá»‡n khuÃ´n máº·t Ä‘á»ƒ Ä‘iá»ƒm danh nhanh chÃ³ng vÃ  chÃ­nh xÃ¡c</p>
        </div>

        <div class="features">
            <div class="feature-card">
                <div class="feature-icon">ğŸ‘¤</div>
                <h3>ÄÄƒng kÃ½ sinh viÃªn</h3>
                <p>ThÃªm sinh viÃªn má»›i vÃ o há»‡ thá»‘ng vá»›i thÃ´ng tin vÃ  áº£nh khuÃ´n máº·t</p>
                <a href="/register" class="btn btn-primary">ÄÄƒng kÃ½ ngay</a>
            </div>

            <div class="feature-card">
                <div class="feature-icon">âœ…</div>
                <h3>Äiá»ƒm danh</h3>
                <p>Äiá»ƒm danh sinh viÃªn báº±ng upload áº£nh hoáº·c webcam real-time</p>
                <a href="/attendance" class="btn btn-primary">Äiá»ƒm danh</a>
            </div>

            <div class="feature-card">
                <div class="feature-icon">ğŸ“Š</div>
                <h3>Lá»‹ch sá»­</h3>
                <p>Xem láº¡i lá»‹ch sá»­ Ä‘iá»ƒm danh vÃ  thá»‘ng kÃª chi tiáº¿t</p>
                <a href="/history" class="btn btn-primary">Xem lá»‹ch sá»­</a>
            </div>
        </div>

        <div class="stats-section">
            <h3>Thá»‘ng kÃª há»‡ thá»‘ng</h3>
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number" id="totalStudents">0</div>
                    <div class="stat-label">Tá»•ng sinh viÃªn</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="todayAttendance">0</div>
                    <div class="stat-label">Äiá»ƒm danh hÃ´m nay</div>
                </div>
            </div>
        </div>
    </div>

    <footer>
        <p>&copy; Há»‡ Thá»‘ng Äiá»ƒm Danh Sinh ViÃªn | Äá»“ Ãn MÃ´n ChuyÃªn Äá» - NhÃ³m 2</p>
    </footer>

    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
    <script>
        // Load thá»‘ng kÃª
        fetch('/students')
            .then(response => response.json())
            .then(data => {
                document.getElementById('totalStudents').textContent = data.length;
            });

        fetch('/history')
            .then(response => response.text())
            .then(html => {
                const parser = new DOMParser();
                const doc = parser.parseFromString(html, 'text/html');
                const rows = doc.querySelectorAll('table tbody tr');
                const today = new Date().toISOString().split('T')[0];
                let todayCount = 0;
                
                rows.forEach(row => {
                    const dateCell = row.cells[2].textContent;
                    if (dateCell.includes(today)) {
                        todayCount++;
                    }
                });
                
                document.getElementById('todayAttendance').textContent = todayCount;
            });
    </script>
</body>
</html>